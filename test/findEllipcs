import numpy as np
import cv2 as cv
img = cv.imread('/home/luckye/Downloads/red_circle.jpeg')
cv.imshow('img', img)
hsv = cv.cvtColor(img, cv.COLOR_BGR2HSV)

lower_red_1 = np.array([0, 43, 46])
upper_red_1 = np.array([10, 255, 255])

lower_red_2 = np.array([156, 43, 46])
upper_red_2 = np.array([180, 255, 255])

#Initialize the mask and result using the initial HSV values
#mask_red_1 = cv.inRange(hsv, lower_red_1, upper_red_1)
#mask_red_2 = cv.inRange(hsv, lower_red_2, upper_red_2)
mask_red = cv.inRange(hsv, lower_red_2, upper_red_2)
#mask_red = cv.bitwise_or(mask_red_1,mask_red_2)
mask_red = cv.dilate(mask_red, None, iterations=2)
res = cv.bitwise_and(img, img, mask=mask_red)

#median = cv.medianBlur(mask_red, 9)

res = cv.dilate(res, None, iterations=3)  #膨胀操作，其实先腐蚀再膨胀的效果是开运算，去除噪点

#mask_red = cv.erode(mask_red, None, iterations=2)  #腐蚀操作    

cv.imshow('img', mask_red)

# contours_red, hierachy = cv.findContours(mask_red, cv.RETR_EXTERNAL, cv.CHAIN_APPROX_NONE)
# res = cv.drawContours(img, contours_red, -1,(0,0,255), 4)

# Wait for a key event and close the window when a key is pressed
cv.waitKey(0)
cv.destroyAllWindows()
